"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2233],{39367:function(e,t,n){var o=n(51541),r=n(41564),d=n(8841),i=n(87240),c=n(88292),a=n(21133),w=n(38276),s=n(44689),g=n(59194),l=n(9444),u=n(90278),A=n(77833),f=n(40878),y=n(30470),h=n(28e3),m=n(29810),p=n(12185),k=n(23986);const v=new p.A({source:new h.A}),I=new m.A({wrapX:!1}),F=new k.A({source:I,style:function(e){return[new c.Ay({image:new a.A({radius:8,fill:new w.A({color:"rgba(255, 0, 0, 0.2)"}),stroke:new s.A({color:"red",width:1})}),text:new g.A({text:e.get("node").id.toString(),fill:new w.A({color:"red"}),stroke:new s.A({color:"white",width:3})})})]}}),b=new m.A({wrapX:!1}),B=new k.A({source:b,style:function(e){return[new c.Ay({stroke:new s.A({color:"blue",width:1}),text:new g.A({text:e.get("edge").id.toString(),fill:new w.A({color:"blue"}),stroke:new s.A({color:"white",width:2})})})]}}),x=new m.A({wrapX:!1}),E=new k.A({source:x,style:function(e){return[new c.Ay({stroke:new s.A({color:"black",width:1}),fill:new w.A({color:"rgba(0, 255, 0, 0.2)"}),text:new g.A({font:"bold 12px sans-serif",text:e.get("face").id.toString(),fill:new w.A({color:"green"}),stroke:new s.A({color:"white",width:2})})})]}}),N=new r.A({layers:[v,E,B,F],target:"map",view:new i.Ay({center:[-11e6,46e5],zoom:16})}),S=topolis.createTopology();function P(e,t){const n=e.getFeatureById(t.id);e.removeFeature(n)}function C(e,t){let n;const o=e.getEdgeByPoint(t,5)[0];return n=o?e.modEdgeSplit(o,t):e.addIsoNode(t),n}S.on("addnode",(function(e){const t=new o.A({geometry:new f.A(e.coordinate),node:e});t.setId(e.id),I.addFeature(t)})),S.on("removenode",(function(e){P(I,e)})),S.on("addedge",(function(e){const t=new o.A({geometry:new A.A(e.coordinates),edge:e});t.setId(e.id),b.addFeature(t)})),S.on("modedge",(function(e){b.getFeatureById(e.id).setGeometry(new A.A(e.coordinates))})),S.on("removeedge",(function(e){P(b,e)})),S.on("addface",(function(e){const t=S.getFaceGeometry(e),n=new o.A({geometry:new y.Ay(t),face:e});n.setId(e.id),x.addFeature(n)})),S.on("removeface",(function(e){P(x,e)}));const G=new l.Ay({type:"LineString"});G.on("drawend",(function(e){const t=e.feature.getGeometry().getCoordinates(),n=t[0],o=t[t.length-1];let r,d;try{r=S.getNodeByPoint(n),d=S.getNodeByPoint(o);const e=S.getEdgeByPoint(n,5),i=S.getEdgeByPoint(o,5),c=S.getEdgesByLine(t);if(1===c.length&&!r&&!d&&0===e.length&&0===i.length)return S.remEdgeNewFace(c[0]),r=c[0].start,r.face&&S.removeIsoNode(r),d=c[0].end,void(d.face&&S.removeIsoNode(d));r||(r=C(S,n),t[0]=r.coordinate),d||(d=C(S,o),t[t.length-1]=d.coordinate),S.addEdgeNewFaces(r,d,t)}catch(e){toastr.warning(e.toString())}})),N.addInteraction(G);const X=new u.A({source:b});N.addInteraction(X),N.addControl(new d.A)}},function(e){var t;t=39367,e(e.s=t)}]);
//# sourceMappingURL=topolis.js.map