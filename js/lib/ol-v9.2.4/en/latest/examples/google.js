"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7922],{74846:function(e,t,i){var s=i(38376),o=i(94679),r=i(10135),n=i(16235),a=i(28487);class c extends s.A{constructor(e){const t=!!e.highDpi,i=!(!0===e.overlay);super({attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,opaque:i,projection:"EPSG:3857",reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:t?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection}),this.apiKey_=e.key,this.error_=null;const s={mapType:e.mapType||"roadmap",language:e.language||"en-US",region:e.region||"US"};e.imageFormat&&(s.imageFormat=e.imageFormat),e.scale&&(s.scale=e.scale),t&&(s.highDpi=!0),e.layerTypes&&(s.layerTypes=e.layerTypes),e.styles&&(s.styles=e.styles),!0===e.overlay&&(s.overlay=!0),this.sessionTokenRequest_=s,this.sessionTokenValue_,this.sessionRefreshId_,this.previousViewportAttribution_,this.previousViewportExtent_,this.createSession_()}getError(){return this.error_}fetchSessionToken(e,t){return fetch(e,t)}async createSession_(){const e="https://tile.googleapis.com/v1/createSession?key="+this.apiKey_,t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},i=await this.fetchSessionToken(e,t);if(!i.ok){try{const e=await i.json();this.error_=new Error(e.error.message)}catch{this.error_=new Error("Error fetching session token")}return void this.setState("error")}const s=await i.json(),o=this.getTilePixelRatio(1),n=[s.tileWidth/o,s.tileHeight/o];this.tileGrid=(0,r.EN)({extent:(0,r.kZ)(this.getProjection()),maxZoom:22,tileSize:n});const a=s.session;this.sessionTokenValue_=a;const c=this.apiKey_;this.tileUrlFunction=function(e,t,i){return`https://tile.googleapis.com/v1/2dtiles/${e[0]}/${e[1]}/${e[2]}?session=${a}&key=${c}`};const h=1e3*parseInt(s.expiry,10),l=Math.max(h-Date.now()-6e4,1);this.sessionRefreshId_=setTimeout((()=>this.createSession_()),l),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready")}async fetchAttributions_(e){if(e.viewHints[o.A.ANIMATING]||e.viewHints[o.A.INTERACTING]||e.animate)return this.previousViewportAttribution_;const[t,i]=(0,a.WP)((0,n.R)(e.extent),e.viewState.projection),[s,r]=(0,a.WP)((0,n.WU)(e.extent),e.viewState.projection),c=`zoom=${this.getTileGrid().getZForResolution(e.viewState.resolution,this.zDirection)}&north=${r}&south=${i}&east=${s}&west=${t}`;if(this.previousViewportExtent_==c)return this.previousViewportAttribution_;this.previousViewportExtent_=c;const h=`https://tile.googleapis.com/tile/v1/viewport?session=${this.sessionTokenValue_}&key=${this.apiKey_}&${c}`;return this.previousViewportAttribution_=await fetch(h).then((e=>e.json())).then((e=>e.copyright)),this.previousViewportAttribution_}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}var h=c,l=i(96256),p=i(41564),u=i(87240),g=i(73988),y=i(76825);document.getElementById("key-form").addEventListener("submit",(e=>{!function(e){const t=new h({key:e,scale:"scaleFactor2x",highDpi:!0});t.on("change",(()=>{"error"===t.getState()&&alert(t.getError())}));class i extends g.A{constructor(){const e=document.createElement("img");e.style.pointerEvents="none",e.style.position="absolute",e.style.bottom="5px",e.style.left="5px",e.src="https://developers.google.com/static/maps/documentation/images/google_on_white.png",super({element:e})}}new p.A({layers:[new l.A({source:t})],controls:(0,y.N)().extend([new i]),target:"map",view:new u.Ay({center:[0,0],zoom:2})})}(e.target.elements.key.value)}))}},function(e){var t;t=74846,e(e.s=t)}]);
//# sourceMappingURL=google.js.map