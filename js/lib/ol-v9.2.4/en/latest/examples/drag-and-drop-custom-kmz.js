"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9190],{54929:function(e,n,t){var r=t(41564),o=t(87240),c=t(56182),i=t(35947),a=t(30135),s=t(94782),u=t(49208),f=t(17534),l=t(28665),d=t(28e3),g=t(29810),m=t(12185),w=t(23986);const p=new JSZip;function A(e){let n;p.load(e);const t=p.file(/\.kml$/i)[0];return t&&(n=t.asText()),n}function h(e){const n=window.location.href.lastIndexOf("/");if(-1!==n){const t=p.file(e.slice(n+1));if(t)return URL.createObjectURL(new Blob([t.asArrayBuffer()]))}return e}class y extends a.Ay{constructor(e){const n=e||{};n.iconUrlFunction=h,super(n)}getType(){return"arraybuffer"}readFeature(e,n){const t=A(e);return super.readFeature(t,n)}readFeatures(e,n){const t=A(e);return super.readFeatures(t,n)}}const k=new c.A({formatConstructors:[y,s.A,u.A,f.A,a.Ay,l.A]}),b=new r.A({interactions:(0,i.N)().extend([k]),layers:[new m.A({source:new d.A})],target:"map",view:new o.Ay({center:[0,0],zoom:2})});k.on("addfeatures",(function(e){const n=new g.A({features:e.features});b.addLayer(new w.A({source:n})),b.getView().fit(n.getExtent())}));const E=function(e){const n=[];if(b.forEachFeatureAtPixel(e,(function(e){n.push(e)})),n.length>0){const e=[];let t,r;for(t=0,r=n.length;t<r;++t){const r=n[t].get("description")||n[t].get("name")||n[t].get("_name")||n[t].get("layer");r&&e.push(r)}document.getElementById("info").innerHTML=e.join("<br/>")||"&nbsp"}else document.getElementById("info").innerHTML="&nbsp;"};b.on("pointermove",(function(e){if(e.dragging)return;const n=b.getEventPixel(e.originalEvent);E(n)})),b.on("click",(function(e){E(e.pixel)}));const v=document.getElementById("download");document.getElementById("download-kmz").addEventListener("click",(function(){var e;e="iceland.kmz",fetch("data/kmz/iceland.kmz").then((function(e){return e.blob()})).then((function(n){v.href=URL.createObjectURL(n),v.download=e,v.click()}))}))}},function(e){var n;n=54929,e(e.s=n)}]);
//# sourceMappingURL=drag-and-drop-custom-kmz.js.map