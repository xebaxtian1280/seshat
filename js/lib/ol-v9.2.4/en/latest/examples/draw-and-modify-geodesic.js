"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6680],{58227:function(e,t,o){var n=o(41564),r=o(87240),c=o(88292),i=o(38276),s=o(44689),f=o(21133),a=o(74676),u=o(9444),y=o(90278),m=o(29050),d=o(30470),g=o(40878),l=o(28e3),w=o(29810),G=o(12185),A=o(23986),p=o(7074),E=o(28487);const C=new G.A({source:new l.A}),h=new w.A,P=new c.Ay({fill:new i.A({color:"rgba(255, 255, 255, 0.2)"}),stroke:new s.A({color:"#33cc33",width:2}),image:new f.A({radius:7,fill:new i.A({color:"#ffcc33"})})}),S=new c.Ay({geometry:function(e){return e.get("modifyGeometry")||e.getGeometry()},fill:new i.A({color:"rgba(255, 255, 255, 0.2)"}),stroke:new s.A({color:"#ff3333",width:2}),image:new f.A({radius:7,fill:new i.A({color:"rgba(0, 0, 0, 0)"})})}),k=new A.A({source:h,style:function(e){return"GeometryCollection"===e.getGeometry().getType()?S:P}}),v=new n.A({layers:[C,k],target:"map",view:new r.Ay({center:[-11e6,66e5],zoom:3})}),I=new a.A({source:h}).getOverlay().getStyleFunction(),b=new a.A({source:h,style:function(e){return e.get("features").forEach((function(t){const o=t.get("modifyGeometry");if(o){const n=e.getGeometry().getCoordinates(),r=t.getGeometry().getGeometries(),c=r[0].getCoordinates()[0],i=r[1].getCoordinates(),s=v.getView().getProjection();let f,a,u;n[0]===i[0]&&n[1]===i[1]?(f=(0,E.pd)(c[0],s,"EPSG:4326"),a=(0,E.pd)(c[(c.length-1)/2],s,"EPSG:4326"),u=(0,p.Yf)(f,a)/2):(f=(0,E.pd)(i,s,"EPSG:4326"),a=(0,E.pd)(n,s,"EPSG:4326"),u=(0,p.Yf)(f,a));const y=(0,d.kj)((0,E.pd)(i,s,"EPSG:4326"),u,128);y.transform("EPSG:4326",s),r[0].setCoordinates(y.getCoordinates()),o.setGeometries(r)}})),I(e)}});let j,Y;b.on("modifystart",(function(e){e.features.forEach((function(e){const t=e.getGeometry();"GeometryCollection"===t.getType()&&e.set("modifyGeometry",t.clone(),!0)}))})),b.on("modifyend",(function(e){e.features.forEach((function(e){const t=e.get("modifyGeometry");t&&(e.setGeometry(t),e.unset("modifyGeometry",!0))}))})),v.addInteraction(b);const F=document.getElementById("type");function T(){let e,t=F.value;"Geodesic"===t&&(t="Circle",e=function(e,t,o){t||(t=new m.A([new d.Ay([]),new g.A(e[0])]));const n=t.getGeometries(),r=(0,E.pd)(e[0],o,"EPSG:4326"),c=(0,E.pd)(e[1],o,"EPSG:4326"),i=(0,p.Yf)(r,c),s=(0,d.kj)(r,i,128);return s.transform("EPSG:4326",o),n[0].setCoordinates(s.getCoordinates()),t.setGeometries(n),t}),j=new u.Ay({source:h,type:t,geometryFunction:e}),v.addInteraction(j),Y=new y.A({source:h}),v.addInteraction(Y)}F.onchange=function(){v.removeInteraction(j),v.removeInteraction(Y),T()},T()}},function(e){var t;t=58227,e(e.s=t)}]);
//# sourceMappingURL=draw-and-modify-geodesic.js.map