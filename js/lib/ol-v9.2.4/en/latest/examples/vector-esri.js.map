{"version":3,"file":"vector-esri.js","mappings":"8OAWA,MAKMA,EAAa,CACjB,yBAA0B,CAAC,EAAG,EAAG,EAAG,GACpC,iBAAkB,CAAC,IAAK,IAAK,IAAK,GAClC,OAAU,CAAC,IAAK,GAAI,EAAG,GACvB,SAAY,CAAC,IAAK,EAAG,EAAG,GACxB,UAAa,CAAC,IAAK,EAAG,EAAG,GACzB,SAAY,CAAC,EAAG,IAAK,IAAK,IAC1B,QAAW,CAAC,IAAK,IAAK,EAAG,IACzB,UAAa,CAAC,IAAK,IAAK,EAAG,GAC3B,mBAAoB,CAAC,IAAK,IAAK,IAAK,GACpC,SAAY,CAAC,GAAI,IAAK,EAAG,GACzB,2BAA4B,CAAC,GAAI,IAAK,EAAG,GACzC,gBAAiB,CAAC,EAAG,IAAK,IAAK,GAC/B,eAAgB,CAAC,EAAG,GAAI,IAAK,IAGzBC,EAAQ,IAAI,KAAM,CACtBC,KAAM,IAAI,IACVC,OAAQ,IAAI,IAAO,CACjBC,MAAO,CAAC,EAAG,EAAG,EAAG,GACjBC,MAAO,OAILC,EAAe,IAAI,IAAa,CACpCC,OAAQ,IAAI,IACZC,IAAK,SAAUC,EAAQC,EAAYC,GAEjC,MAAMC,EAAOD,EACVE,UACAC,MAAM,aACNC,MA0BH,MAvBEC,2NAIAC,mBACE,WACER,EAAO,GACP,WACAA,EAAO,GACP,WACAA,EAAO,GACP,WACAA,EAAO,GACP,+BACAG,EACA,MAEJ,2CACAA,EAlBAI,sBAqBAJ,CAGJ,EACAM,UAAU,SACR,QAAU,CACRC,SAAU,OAGdC,aACE,yJAKEC,EAAS,IAAI,IAAY,CAC7BC,OAAQhB,EACRL,MAAO,SAAUsB,GACf,MAAMC,EAAWD,EAAQE,IAAI,WACvBrB,EAAQJ,EAAWwB,IAAa,CAAC,EAAG,EAAG,EAAG,GAEhD,OADAvB,EAAMyB,UAAUC,SAASvB,GAClBH,CACT,EACA2B,QAAS,KAGLC,EAAS,IAAI,IAAU,CAC3BP,OAAQ,IAAI,IAAI,CACdF,aACE,+GAEFZ,IACE,qGAKAsB,EAAM,IAAI,IAAI,CAClBC,OAAQ,CAACF,EAAQR,GACjBW,OAAQC,SAASC,eAAe,OAChCC,KAAM,IAAI,KAAK,CACbC,QAAQ,QAAW,CAAC,KAAM,OAC1BC,KAAM,OAsBVP,EAAIQ,GAAG,CAAC,QAAS,gBAAgB,SAAUC,GACrCA,EAAIC,UAnBiB,SAAUC,GACnC,MAAMlB,EAAUO,EAAIY,sBAAsBD,GAAO,SAAUlB,GACzD,OAAOA,CACT,IACA,GAAIA,EAAS,CACX,MAAMoB,EACJ,kBACApB,EAAQE,IAAI,WACZ,sBACAF,EAAQE,IAAI,WACdQ,SAASC,eAAe,QAAQU,UAAYD,EAC5Cb,EAAIe,YAAY5C,MAAM6C,OAAS,SACjC,MACEb,SAASC,eAAe,QAAQU,UAAY,mBAC5Cd,EAAIe,YAAY5C,MAAM6C,OAAS,EAEnC,CAMEC,CAAmBR,EAAIE,MACzB,G","sources":["webpack:///./vector-esri.js"],"sourcesContent":["import EsriJSON from '../src/ol/format/EsriJSON.js';\nimport Map from '../src/ol/Map.js';\nimport VectorSource from '../src/ol/source/Vector.js';\nimport View from '../src/ol/View.js';\nimport XYZ from '../src/ol/source/XYZ.js';\nimport {Fill, Stroke, Style} from '../src/ol/style.js';\nimport {Tile as TileLayer, Vector as VectorLayer} from '../src/ol/layer.js';\nimport {createXYZ} from '../src/ol/tilegrid.js';\nimport {fromLonLat} from '../src/ol/proj.js';\nimport {tile as tileStrategy} from '../src/ol/loadingstrategy.js';\n\nconst serviceUrl =\n  'https://services-eu1.arcgis.com/NPIbx47lsIiu2pqz/ArcGIS/rest/services/' +\n  'Neptune_Coastline_Campaign_Open_Data_Land_Use_2014/FeatureServer/';\nconst layer = '0';\n\nconst fillColors = {\n  'Lost To Sea Since 1965': [0, 0, 0, 1],\n  'Urban/Built-up': [104, 104, 104, 1],\n  'Shacks': [115, 76, 0, 1],\n  'Industry': [230, 0, 0, 1],\n  'Wasteland': [230, 0, 0, 1],\n  'Caravans': [0, 112, 255, 0.5],\n  'Defence': [230, 152, 0, 0.5],\n  'Transport': [230, 152, 0, 1],\n  'Open Countryside': [255, 255, 115, 1],\n  'Woodland': [38, 115, 0, 1],\n  'Managed Recreation/Sport': [85, 255, 0, 1],\n  'Amenity Water': [0, 112, 255, 1],\n  'Inland Water': [0, 38, 115, 1],\n};\n\nconst style = new Style({\n  fill: new Fill(),\n  stroke: new Stroke({\n    color: [0, 0, 0, 1],\n    width: 0.5,\n  }),\n});\n\nconst vectorSource = new VectorSource({\n  format: new EsriJSON(),\n  url: function (extent, resolution, projection) {\n    // ArcGIS Server only wants the numeric portion of the projection ID.\n    const srid = projection\n      .getCode()\n      .split(/:(?=\\d+$)/)\n      .pop();\n\n    const url =\n      serviceUrl +\n      layer +\n      '/query/?f=json&' +\n      'returnGeometry=true&spatialRel=esriSpatialRelIntersects&geometry=' +\n      encodeURIComponent(\n        '{\"xmin\":' +\n          extent[0] +\n          ',\"ymin\":' +\n          extent[1] +\n          ',\"xmax\":' +\n          extent[2] +\n          ',\"ymax\":' +\n          extent[3] +\n          ',\"spatialReference\":{\"wkid\":' +\n          srid +\n          '}}',\n      ) +\n      '&geometryType=esriGeometryEnvelope&inSR=' +\n      srid +\n      '&outFields=*' +\n      '&outSR=' +\n      srid;\n\n    return url;\n  },\n  strategy: tileStrategy(\n    createXYZ({\n      tileSize: 512,\n    }),\n  ),\n  attributions:\n    'University of Leicester (commissioned by the ' +\n    '<a href=\"https://www.arcgis.com/home/item.html?id=' +\n    'd5f05b1dc3dd4d76906c421bc1727805\">National Trust</a>)',\n});\n\nconst vector = new VectorLayer({\n  source: vectorSource,\n  style: function (feature) {\n    const classify = feature.get('LU_2014');\n    const color = fillColors[classify] || [0, 0, 0, 0];\n    style.getFill().setColor(color);\n    return style;\n  },\n  opacity: 0.7,\n});\n\nconst raster = new TileLayer({\n  source: new XYZ({\n    attributions:\n      'Tiles Â© <a href=\"https://services.arcgisonline.com/ArcGIS/' +\n      'rest/services/World_Topo_Map/MapServer\">ArcGIS</a>',\n    url:\n      'https://server.arcgisonline.com/ArcGIS/rest/services/' +\n      'World_Topo_Map/MapServer/tile/{z}/{y}/{x}',\n  }),\n});\n\nconst map = new Map({\n  layers: [raster, vector],\n  target: document.getElementById('map'),\n  view: new View({\n    center: fromLonLat([1.72, 52.4]),\n    zoom: 14,\n  }),\n});\n\nconst displayFeatureInfo = function (pixel) {\n  const feature = map.forEachFeatureAtPixel(pixel, function (feature) {\n    return feature;\n  });\n  if (feature) {\n    const info =\n      '2014 Land Use: ' +\n      feature.get('LU_2014') +\n      '<br>1965 Land Use: ' +\n      feature.get('LU_1965');\n    document.getElementById('info').innerHTML = info;\n    map.getTarget().style.cursor = 'pointer';\n  } else {\n    document.getElementById('info').innerHTML = '&nbsp;<br>&nbsp;';\n    map.getTarget().style.cursor = '';\n  }\n};\n\nmap.on(['click', 'pointermove'], function (evt) {\n  if (evt.dragging) {\n    return;\n  }\n  displayFeatureInfo(evt.pixel);\n});\n"],"names":["fillColors","style","fill","stroke","color","width","vectorSource","format","url","extent","resolution","projection","srid","getCode","split","pop","serviceUrl","encodeURIComponent","strategy","tileSize","attributions","vector","source","feature","classify","get","getFill","setColor","opacity","raster","map","layers","target","document","getElementById","view","center","zoom","on","evt","dragging","pixel","forEachFeatureAtPixel","info","innerHTML","getTarget","cursor","displayFeatureInfo"],"sourceRoot":""}