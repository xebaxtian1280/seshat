"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4348],{45335:function(e,t,n){var o=n(41564),r=n(87240),i=n(88292),c=n(38276),s=n(44689),a=n(21133),f=n(74676),u=n(22514),m=n(9444),y=n(40878),g=n(7535),d=n(28e3),l=n(29810),w=n(12185),A=n(23986),h=n(16235),p=n(38808);const G=new w.A({source:new d.A}),C=new l.A,E=new i.Ay({geometry:function(e){const t=e.get("modifyGeometry");return t?t.geometry:e.getGeometry()},fill:new c.A({color:"rgba(255, 255, 255, 0.2)"}),stroke:new s.A({color:"#ffcc33",width:2}),image:new a.A({radius:7,fill:new c.A({color:"#ffcc33"})})});function M(e){let t,n,o;const r=e.getType();if("Polygon"===r){let o=0,r=0,i=0;n=e.getCoordinates()[0].slice(1),n.forEach((function(e){o+=e[0],r+=e[1],i++})),t=[o/i,r/i]}else"LineString"===r?(t=e.getCoordinateAt(.5),n=e.getCoordinates()):t=(0,h.q1)(e.getExtent());let i;return n?(i=n.map((function(e){const n=e[0]-t[0],o=e[1]-t[1];return n*n+o*o})),o=Math.sqrt(Math.max.apply(Math,i))/3):o=Math.max((0,h.RG)(e.getExtent()),(0,h.Oq)(e.getExtent()))/3,{center:t,coordinates:n,minRadius:o,sqDistances:i}}const k=new A.A({source:C,style:function(e){const t=[E],n=e.get("modifyGeometry"),o=M(n?n.geometry:e.getGeometry()),r=o.center;if(r){t.push(new i.Ay({geometry:new y.A(r),image:new a.A({radius:4,fill:new c.A({color:"#ff3333"})})}));const e=o.coordinates;if(e){const n=o.minRadius,r=o.sqDistances,s=n*n,f=e.filter((function(e,t){return r[t]>s}));t.push(new i.Ay({geometry:new g.A(f),image:new a.A({radius:4,fill:new c.A({color:"#33cc33"})})}))}}return t}}),q=new o.A({layers:[G,k],target:"map",view:new r.Ay({center:[-11e6,46e5],zoom:4})}),v=new f.A({source:C}).getOverlay().getStyleFunction(),x=new f.A({source:C,condition:function(e){return(0,p.fs)(e)&&!(0,p.k5)(e)},deleteCondition:p.Zm,insertVertexCondition:p.Zm,style:function(e){return e.get("features").forEach((function(t){const n=t.get("modifyGeometry");if(n){const t=e.getGeometry().getCoordinates();let o=n.point;if(!o){o=t,n.point=o,n.geometry0=n.geometry;const e=M(n.geometry0);n.center=e.center,n.minRadius=e.minRadius}const r=n.center,i=n.minRadius;let c,s;c=o[0]-r[0],s=o[1]-r[1];const a=Math.sqrt(c*c+s*s);if(a>i){const e=Math.atan2(s,c);c=t[0]-r[0],s=t[1]-r[1];const o=Math.sqrt(c*c+s*s);if(o>0){const t=Math.atan2(s,c),i=n.geometry0.clone();i.scale(o/a,void 0,r),i.rotate(t-e,r),n.geometry=i}}}})),v(e)}});let R;x.on("modifystart",(function(e){e.features.forEach((function(e){e.set("modifyGeometry",{geometry:e.getGeometry().clone()},!0)}))})),x.on("modifyend",(function(e){e.features.forEach((function(e){const t=e.get("modifyGeometry");t&&(e.setGeometry(t.geometry),e.unset("modifyGeometry",!0))}))})),q.addInteraction(x),q.addInteraction(new u.A({condition:function(e){return(0,p.fs)(e)&&(0,p.k5)(e)},layers:[k]}));const I=document.getElementById("type");function b(){R=new m.Ay({source:C,type:I.value}),q.addInteraction(R)}I.onchange=function(){q.removeInteraction(R),b()},b()}},function(e){var t;t=45335,e(e.s=t)}]);
//# sourceMappingURL=modify-scale-and-rotate.js.map